{"ast":null,"code":"import _regeneratorRuntime from\"/Users/terry/Work/React Projects/StackOverflowProject/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/terry/Work/React Projects/StackOverflowProject/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/terry/Work/React Projects/StackOverflowProject/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/terry/Work/React Projects/StackOverflowProject/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/terry/Work/React Projects/StackOverflowProject/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/terry/Work/React Projects/StackOverflowProject/node_modules/@babel/runtime/helpers/esm/inherits\";import _taggedTemplateLiteral from\"/Users/terry/Work/React Projects/StackOverflowProject/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  padding: 1%;\\n  background: lightBlue;\\n  color: white;\\n  text-decoration: none\\n  border-radius: 5px;\\n \"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-between;\\n \"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n    text-decoration: none;\\n    color: inherit;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  text-align: center;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  flex-direction: column;\\n  margin: 5%;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{Component}from'react';import styled from'styled-components';import Card from'../components/Card/Card';import{Link}from\"react-router-dom\";import queryString from\"query-string\";var FeedWrapper=styled.div(_templateObject());var Alert=styled.div(_templateObject2());var CardLink=styled(Link)(_templateObject3());var PaginationBar=styled.div(_templateObject4());var PaginationLink=styled(Link)(_templateObject5());var ROOT_API='https://api.stackexchange.com/2.2/';var Feed=/*#__PURE__*/function(_Component){_inherits(Feed,_Component);function Feed(props){var _this;_classCallCheck(this,Feed);_this=_possibleConstructorReturn(this,_getPrototypeOf(Feed).call(this,props));var query=queryString.parse(props.location.search);_this.state={data:[],loading:true,page:query.page?parseInt(query.page):1,error:''};return _this;}_createClass(Feed,[{key:\"fetchAPI\",value:function fetchAPI(page){var data,dataJSON;return _regeneratorRuntime.async(function fetchAPI$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(fetch(\"\".concat(ROOT_API,\"questions?order=desc&sort=activity&tagged=reactjs&site=stackoverflow\").concat(page?\"&page=\".concat(page):'')));case 3:data=_context.sent;_context.next=6;return _regeneratorRuntime.awrap(data.json());case 6:dataJSON=_context.sent;if(dataJSON){this.setState({data:dataJSON,loading:false});}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);this.setState({loading:false,error:_context.t0.message});case 13:case\"end\":return _context.stop();}}},null,this,[[0,10]]);}},{key:\"componentDidMount\",value:function componentDidMount(){var page;return _regeneratorRuntime.async(function componentDidMount$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=this.state.page;this.fetchAPI(page);case 2:case\"end\":return _context2.stop();}}},null,this);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this2=this;if(prevProps.location.search!==this.props.location.search){var query=queryString.parse(this.props.location.search);this.setState({page:parseInt(query.page)},function(){return _this2.fetchAPI(_this2.state.page);});}}},{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,page=_this$state.page,loading=_this$state.loading,error=_this$state.error;var match=this.props.match;if(loading||error){return(/*#__PURE__*/React.createElement(Alert,null,loading?'Loading...':error));}return(/*#__PURE__*/React.createElement(FeedWrapper,null,data.items.map(function(item){return(/*#__PURE__*/React.createElement(CardLink,{key:item.question_id,to:\"/questions/\".concat(item.question_id)},/*#__PURE__*/React.createElement(Card,{key:item.question_id,data:item})));}),/*#__PURE__*/React.createElement(PaginationBar,null,page>1&&/*#__PURE__*/React.createElement(PaginationLink,{to:\"\".concat(match.url,\"?page=\").concat(page-1)},\"Previous\"),data.has_more&&/*#__PURE__*/React.createElement(PaginationLink,{to:\"\".concat(match.url,\"?page=\").concat(page+1)},\"Next\"))));}}]);return Feed;}(Component);export default Feed;","map":{"version":3,"sources":["/Users/terry/Work/React Projects/StackOverflowProject/src/containers/Feed.js"],"names":["React","Component","styled","Card","Link","queryString","FeedWrapper","div","Alert","CardLink","PaginationBar","PaginationLink","ROOT_API","Feed","props","query","parse","location","search","state","data","loading","page","parseInt","error","fetch","json","dataJSON","setState","message","fetchAPI","prevProps","match","items","map","item","question_id","url","has_more"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Card from '../components/Card/Card';\nimport { Link } from \"react-router-dom\";\nimport queryString from \"query-string\";\n\nconst FeedWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  margin: 5%;\n`;\n\nconst Alert = styled.div`\n  text-align: center;\n`;\n\nconst CardLink = styled(Link)`\n    text-decoration: none;\n    color: inherit;\n`;\n\nconst PaginationBar = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n `;\n\nconst PaginationLink = styled(Link)`\n  padding: 1%;\n  background: lightBlue;\n  color: white;\n  text-decoration: none\n  border-radius: 5px;\n `;\n\nconst ROOT_API = 'https://api.stackexchange.com/2.2/';\n\nclass Feed extends Component {\n    constructor(props) {\n        super(props);\n\n        const query = queryString.parse(props.location.search);\n\n        this.state = {\n            data: [],\n            loading: true,\n            page: (query.page) ? parseInt(query.page) : 1,\n            error: '',\n        };\n    }\n\n    async fetchAPI(page) {\n        try {\n            const data = await fetch(`${ROOT_API}questions?order=desc&sort=activity&tagged=reactjs&site=stackoverflow${(page) ? `&page=${page}` : ''}`);\n            const dataJSON = await data.json();\n\n            if (dataJSON) {\n                this.setState({\n                    data: dataJSON,\n                    loading: false,\n                });\n            }\n        } catch (error) {\n            this.setState({\n                loading: false,\n                error: error.message,\n            });\n        }\n    }\n\n    async componentDidMount() {\n        const { page } = this.state;\n\n        this.fetchAPI(page);\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.location.search !== this.props.location.search) {\n            const query = queryString.parse(this.props.location.search);\n            this.setState({\n                page: parseInt(query.page)\n            },\n                () => this.fetchAPI(this.state.page)\n            );\n        }\n    }\n\n    render() {\n        const { data, page, loading, error } = this.state;\n        const { match } = this.props;\n\n        if (loading || error) {\n            return <Alert>{loading ? 'Loading...' : error}</Alert>;\n        }\n\n        return (\n            <FeedWrapper>\n                {data.items.map(item => (\n                    <CardLink key={item.question_id} to={`/questions/${item.question_id}`}>\n                        <Card key={item.question_id} data={item} />\n                    </CardLink>\n                ))}\n                <PaginationBar>\n                    {page > 1 && <PaginationLink to={`${match.url}?page=${page - 1}`}>Previous</PaginationLink>}\n                    {data.has_more && <PaginationLink to={`${match.url}?page=${page + 1}`}>Next</PaginationLink>}\n                </PaginationBar>\n            </FeedWrapper>\n        )\n    }\n}\n\nexport default Feed;\n"]},"metadata":{},"sourceType":"module"}